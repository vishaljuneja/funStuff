(function(){var e=function(e,t,r,s){return t.commands.code={exec:function(r){var s=this.state(r);if(s)r.selection.executeAndRestore(function(){var e=s.querySelector("code");t.dom.replaceWithChildNodes(s),e&&t.dom.replaceWithChildNodes(e)});else{var o=r.selection.getRange(),a=o.extractContents(),i=r.doc.createElement("code");s=r.doc.createElement("pre"),s.appendChild(i),i.appendChild(a),o.insertNode(s),r.selection.selectNode(s);var n=document.createElement("br");e(n).insertAfter(s)}},state:function(e){var r=e.selection.getSelectedNode();return t.dom.getParentElement(r,{nodeName:"CODE"})&&t.dom.getParentElement(r,{nodeName:"PRE"})}},r.defaults=e.extend(r.defaults,{"toolbar.code":!0}),r.plugin("code",function(t,o,a,i){if(i["toolbar.code"]){var n=e(s({prefix:i["prefix.css"]}));r.insertIntoLeftToolbar(o,n,6)}}),r};"function"==typeof define&&define.amd?define(["jquery","bundles/wysihtml5/wysihtml5-0.4.0pre","bundles/wysihtml5/editor","bundles/wysihtml5/toolbar-code.html"],function(t,r,s,o){return e(t,r,s,o)}):e(window.$,window.wysihtml5,window.wysiEditor,window.jade.templates["bundles.wysihtml5.toolbar-code"])})(window);