(function(){var t=function(t){"use strict";function e(t){return t&&"string"==typeof t?t.replace(/&/g,"&amp;"):t}function n(t,e){var n,r=0,i=e.length;if(t===void 0)return-1;if(t.constructor===String){for(;i>r;r+=1)if(0===t.localeCompare(e[r]))return r}else for(;i>r;r+=1)if(n=e[r],n.constructor===String){if(0===n.localeCompare(t))return r}else if(n===t)return r;return-1}function r(t,e){return t===e?!0:void 0===t||void 0===e?!1:null===t||null===e?!1:t.constructor===String?0===t.localeCompare(e):e.constructor===String?0===e.localeCompare(t):!1}function i(e,n){var r,i,o;if(null===e||1>e.length)return[];for(r=e.split(n),i=0,o=r.length;o>i;i+=1)r[i]=t.trim(r[i]);return r}function o(t){return t.outerWidth()-t.width()}function a(e){var n="keyup-change-value";e.bind("keydown",function(){void 0===t.data(e,n)&&t.data(e,n,e.val())}),e.bind("keyup",function(){var r=t.data(e,n);void 0!==r&&e.val()!==r&&(t.removeData(e,n),e.trigger("keyup-change"))})}function s(e){e.bind("mousemove",function(e){var n=t.data(document,"select2-lastpos");(void 0===n||n.x!==e.pageX||n.y!==e.pageY)&&t(e.target).trigger("mousemove-filtered",e)})}function l(t,e){var n;return function(){window.clearTimeout(n),n=window.setTimeout(e,t)}}function u(t){var e,n=!1;return function(){return n===!1&&(e=t(),n=!0),e}}function c(t,e){var r=l(t,function(t){e.trigger("scroll-debounced",t)});e.bind("scroll",function(t){n(t.target,e.get())>=0&&r(t)})}function d(t){t.preventDefault(),t.stopPropagation()}function h(e){if(!T){var n=e[0].currentStyle||window.getComputedStyle(e[0],null);T=t("<div></div>").css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),t("body").append(T)}return T.text(e.val()),T.width()}function f(t,e,n){var r=t.toUpperCase().indexOf(e.toUpperCase()),i=e.length;return 0>r?(n.push(t),void 0):(n.push(t.substring(0,r)),n.push("<span class='select2-match'>"),n.push(t.substring(r,r+i)),n.push("</span>"),n.push(t.substring(r+i,t.length)),void 0)}function p(e){var n,r=0,i=null,o=e.quietMillis||100;return function(a){window.clearTimeout(n),n=window.setTimeout(function(){r+=1;var n=r,o=e.data,s=e.transport||t.ajax,l=e.traditional||!1,u=e.type||"GET";o=o.call(this,a.term,a.page,a.context),null!==i&&i.abort(),i=s.call(null,{url:e.url,dataType:e.dataType,data:o,type:u,traditional:l,success:function(t){if(!(r>n)){var i=e.results(t,a.page);a.callback(i)}}})},o)}}function g(e){var n,r=e,i=function(t){return""+t.text};return t.isArray(r)||(i=r.text,t.isFunction(i)||(n=r.text,i=function(t){return t[n]}),r=r.results),function(e){var n=e.term,o={};return""===n?(e.callback({results:r}),void 0):(o.results=t(r).filter(function(){return e.matcher(n,i(this))}).get(),e.callback(o),void 0)}}function m(e){return t.isFunction(e)?e:function(n){var r=n.term,i={results:[]};t(e).each(function(){var t=void 0!==this.text,e=t?this.text:this;(""===r||n.matcher(r,e))&&i.results.push(t?this:{id:this,text:this})}),n.callback(i)}}function v(e){if(t.isFunction(e))return!0;if(!e)return!1;throw Error("formatterName must be a function or a falsy value")}function y(e){return t.isFunction(e)?e():e}function b(e){var n=0;return t.each(e,function(t,e){e.children?n+=b(e.children):n++}),n}function w(t,e,n,i){var o,a,s,l,u,c=t,d=!1;if(!i.createSearchChoice||!i.tokenSeparators||1>i.tokenSeparators.length)return void 0;for(;;){for(a=-1,s=0,l=i.tokenSeparators.length;l>s&&(u=i.tokenSeparators[s],a=t.indexOf(u),!(a>=0));s++);if(0>a)break;if(o=t.substring(0,a),t=t.substring(a+u.length),o.length>0&&(o=i.createSearchChoice(o,e),void 0!==o&&null!==o&&void 0!==i.id(o)&&null!==i.id(o))){for(d=!1,s=0,l=e.length;l>s;s++)if(r(i.id(o),i.id(e[s]))){d=!0;break}d||n(o)}}return 0!=c.localeCompare(t)?t:void 0}function x(e,n){var r=function(){};return r.prototype=new e,r.prototype.constructor=r,r.prototype.parent=e.prototype,r.prototype=t.extend(r.prototype,n),r}if(t.fn.each2===void 0&&t.fn.extend({each2:function(e){for(var n=t([0]),r=-1,i=this.length;i>++r&&(n.context=n[0]=this[r])&&e.call(n[0],r,n)!==!1;);return this}}),void 0===window.Select2){var C,k,A,E,S,T;C={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case C.LEFT:case C.RIGHT:case C.UP:case C.DOWN:return!0}return!1},isControl:function(t){var e=t.which;switch(e){case C.SHIFT:case C.CTRL:case C.ALT:return!0}return t.metaKey?!0:!1},isFunctionKey:function(t){return t=t.which?t.which:t,t>=112&&123>=t}},S=function(){var t=1;return function(){return t++}}(),t(document).delegate("*","mousemove",function(e){t.data(document,"select2-lastpos",{x:e.pageX,y:e.pageY})}),t(document).ready(function(){t(document).delegate("*","mousedown touchend",function(e){var n,r=t(e.target).closest("div.select2-container").get(0);r?t(document).find("div.select2-container-active").each(function(){this!==r&&t(this).data("select2").blur()}):(r=t(e.target).closest("div.select2-drop").get(0),t(document).find("div.select2-drop-active").each(function(){this!==r&&t(this).data("select2").blur()})),r=t(e.target),n=r.attr("for"),"LABEL"===e.target.tagName&&n&&n.length>0&&(r=t("#"+n),r=r.data("select2"),void 0!==r&&(r.focus(),e.preventDefault()))})}),k=x(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(e){var n,r,i=".select2-results";this.opts=e=this.prepareOpts(e),this.id=e.id,void 0!==e.element.data("select2")&&null!==e.element.data("select2")&&this.destroy(),this.enabled=!0,this.container=this.createContainer(),this.containerId="s2id"+S(),this.container.attr("id",this.containerId),this.body=u(function(){return e.element.closest("body")}),void 0!==e.element.attr("class")&&this.container.addClass(e.element.attr("class")),this.container.css(y(e.containerCss)),this.container.addClass(y(e.containerCssClass)),this.opts.element.data("select2",this).hide().before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(y(e.dropdownCssClass)),this.dropdown.data("select2",this),this.results=n=this.container.find(i),this.search=r=this.container.find("input.select2-input"),r.attr("tabIndex",this.opts.element.attr("tabIndex")),this.resultsPage=0,this.context=null,this.initContainer(),this.initContainerWidth(),s(this.results),this.dropdown.delegate(i,"mousemove-filtered",this.bind(this.highlightUnderEvent)),c(80,this.results),this.dropdown.delegate(i,"scroll-debounced",this.bind(this.loadMoreIfNeeded)),t.fn.mousewheel&&n.mousewheel(function(t,e,r,i){var o=n.scrollTop();i>0&&0>=o-i?(n.scrollTop(0),d(t)):0>i&&n.get(0).scrollHeight-n.scrollTop()+i<=n.height()&&(n.scrollTop(n.get(0).scrollHeight-n.height()),d(t))}),a(r),r.bind("keyup-change",this.bind(this.updateResults)),r.bind("focus",function(){r.addClass("select2-focused")," "===r.val()&&r.val("")}),r.bind("blur",function(){r.removeClass("select2-focused")}),this.dropdown.delegate(i,"mouseup",this.bind(function(e){t(e.target).closest(".select2-result-selectable:not(.select2-disabled)").length>0?(this.highlightUnderEvent(e),this.selectHighlighted(e)):this.focusSearch(),d(e)})),this.dropdown.bind("click mouseup mousedown",function(t){t.stopPropagation()}),t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),(e.element.is(":disabled")||e.element.is("[readonly='readonly']"))&&this.disable()},destroy:function(){var t=this.opts.element.data("select2");void 0!==t&&void 0!==t.opts&&(t.container.remove(),t.dropdown.remove(),t.opts.element.removeData("select2").unbind(".select2").show())},prepareOpts:function(n){var o,a,s,l;if(o=n.element,"select"===o.get(0).tagName.toLowerCase()&&(this.select=a=n.element),a&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=t.extend({},{populateResults:function(r,i,o){var a,s=this.opts.id,l=this;a=function(r,i,u){var c,d,h,f,p,g,m,v,y;for(c=0,d=r.length;d>c;c+=1)h=r[c],f=void 0!==s(h),p="children"in h&&h.children.length>0,g=t("<li></li>"),g.addClass("select2-results-dept-"+u),g.addClass("select2-result"),g.addClass(f?"select2-result-selectable":"select2-result-unselectable"),p&&g.addClass("select2-result-with-children"),g.addClass(l.opts.formatResultCssClass(h)),m=t("<div></div>"),m.addClass("select2-result-label"),y=n.formatResult(h,m,o),void 0!==y&&m.html(e(y)),g.append(m),p&&(v=t("<ul></ul>"),v.addClass("select2-result-sub"),a(h.children,v,u+1),g.append(v)),g.data("select2-data",h),i.append(g)},a(i,r,0)}},t.fn.select2.defaults,n),"function"!=typeof n.id&&(s=n.id,n.id=function(t){return t[s]}),a?(n.query=this.bind(function(e){var n,r,i,a={results:[],more:!1},s=e.term;i=function(t,n){var r;t.is("option")?e.matcher(s,t.text(),t)&&n.push({id:t.attr("value"),text:t.text(),element:t.get(),css:t.attr("class")}):t.is("optgroup")&&(r={text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")},t.children().each2(function(t,e){i(e,r.children)}),r.children.length>0&&n.push(r))},n=o.children(),void 0!==this.getPlaceholder()&&n.length>0&&(r=n[0],""===t(r).text()&&(n=n.not(r))),n.each2(function(t,e){i(e,a.results)}),e.callback(a)}),n.id=function(t){return t.id},n.formatResultCssClass=function(t){return t.css}):"query"in n||("ajax"in n?(l=n.element.data("ajax-url"),l&&l.length>0&&(n.ajax.url=l),n.query=p(n.ajax)):"data"in n?n.query=g(n.data):"tags"in n&&(n.query=m(n.tags),n.createSearchChoice=function(t){return{id:t,text:t}},n.initSelection=function(e,o){var a=[];t(i(e.val(),n.separator)).each(function(){var e=this,i=this,o=n.tags;t.isFunction(o)&&(o=o()),t(o).each(function(){return r(this.id,e)?(i=this.text,!1):void 0}),a.push({id:e,text:i})}),o(a)})),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");return n},monitorSource:function(){this.opts.element.bind("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()}))},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click()},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,n,r=this.container.offset(),i=this.container.outerHeight(),o=this.container.outerWidth(),a=this.dropdown.outerHeight(),s=t(window).scrollTop()+document.documentElement.clientHeight,l=r.top+i,u=s>=l+a,c=r.top-a>=this.body().scrollTop(),d=this.dropdown.hasClass("select2-drop-above");d?(e=!0,!c&&u&&(e=!1)):(e=!1,!u&&c&&(e=!0)),e?(l=r.top-a,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")),n={top:l,left:r.left,width:o},this.dropdown.css(n)},shouldOpen:function(){var t;return this.opened()?!1:(t=jQuery.Event("open"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(window.setTimeout(this.bind(this.opening),1),!0):!1},opening:function(){var e=this.containerId,n="#"+e,r="scroll."+e,i="resize."+e;this.container.parents().each(function(){t(this).bind(r,function(){var e=t(n);0==e.length&&t(this).unbind(r),e.select2("close")})}),t(window).bind(i,function(){var e=t(n);0==e.length&&t(window).unbind(i),e.select2("close")}),this.clearDropdownAlignmentPreference()," "===this.search.val()&&this.search.val(""),this.dropdown.css(y(this.opts.dropdownCss)),this.dropdown.addClass("select2-drop-active"),this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.updateResults(!0),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.dropdown.show(),this.ensureHighlightVisible(),this.positionDropdown(),this.focusSearch()},close:function(){if(this.opened()){var e=this;this.container.parents().each(function(){t(this).unbind("scroll."+e.containerId)}),t(window).unbind("resize."+this.containerId),this.clearDropdownAlignmentPreference(),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.opts.element.trigger(jQuery.Event("close"))}},clearSearch:function(){},ensureHighlightVisible:function(){var e,n,r,i,o,a,s,l=this.results;if(n=this.highlight(),!(0>n)){if(0==n)return l.scrollTop(0),void 0;e=l.find(".select2-result-selectable"),r=t(e[n]),i=r.offset().top+r.outerHeight(),n===e.length-1&&(s=l.find("li.select2-more-results"),s.length>0&&(i=s.offset().top+s.outerHeight())),o=l.offset().top+l.outerHeight(),i>o&&l.scrollTop(l.scrollTop()+(i-o)),a=r.offset().top-l.offset().top,0>a&&l.scrollTop(l.scrollTop()+a)}},moveHighlight:function(e){for(var n=this.results.find(".select2-result-selectable"),r=this.highlight();r>-1&&n.length>r;){r+=e;var i=t(n[r]);if(i.hasClass("select2-result-selectable")&&!i.hasClass("select2-disabled")){this.highlight(r);break}}},highlight:function(e){var r=this.results.find(".select2-result-selectable").not(".select2-disabled");return 0===arguments.length?n(r.filter(".select2-highlighted")[0],r.get()):(e>=r.length&&(e=r.length-1),0>e&&(e=0),r.removeClass("select2-highlighted"),t(r[e]).addClass("select2-highlighted"),this.ensureHighlightVisible(),void 0)},countSelectableResults:function(){return this.results.find(".select2-result-selectable").not(".select2-disabled").length},highlightUnderEvent:function(e){var n=t(e.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var r=this.results.find(".select2-result-selectable");this.highlight(r.index(n))}else 0==n.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var t,e=this.results,n=e.find("li.select2-more-results"),r=this.resultsPage+1,i=this,o=this.search.val(),a=this.context;0!==n.length&&(t=n.offset().top-e.offset().top-e.height(),0>=t&&(n.addClass("select2-active"),this.opts.query({term:o,page:r,context:a,matcher:this.opts.matcher,callback:this.bind(function(t){i.opts.populateResults.call(this,e,t.results,{term:o,page:r,context:a}),t.more===!0?(n.detach().appendTo(e).text(i.opts.formatLoadMore(r+1)),window.setTimeout(function(){i.loadMoreIfNeeded()},10)):n.remove(),i.positionDropdown(),i.resultsPage=r})})))},tokenize:function(){},updateResults:function(n){function i(){u.scrollTop(0),l.removeClass("select2-active"),d.positionDropdown()}function o(t){u.html(e(t)),i()}var a,s,l=this.search,u=this.results,c=this.opts,d=this;if(n===!0||this.showSearchInput!==!1&&this.opened()){if(l.addClass("select2-active"),c.maximumSelectionSize>=1&&(a=this.data(),t.isArray(a)&&a.length>=c.maximumSelectionSize&&v(c.formatSelectionTooBig,"formatSelectionTooBig")))return o("<li class='select2-selection-limit'>"+c.formatSelectionTooBig(c.maximumSelectionSize)+"</li>"),void 0;if(l.val().length<c.minimumInputLength&&v(c.formatInputTooShort,"formatInputTooShort"))return o("<li class='select2-no-results'>"+c.formatInputTooShort(l.val(),c.minimumInputLength)+"</li>"),void 0;o("<li class='select2-searching'>"+c.formatSearching()+"</li>"),s=this.tokenize(),void 0!=s&&null!=s&&l.val(s),this.resultsPage=1,c.query({term:l.val(),page:this.resultsPage,context:null,matcher:c.matcher,callback:this.bind(function(a){var s;return this.context=void 0===a.context?null:a.context,this.opts.createSearchChoice&&""!==l.val()&&(s=this.opts.createSearchChoice.call(null,l.val(),a.results),void 0!==s&&null!==s&&void 0!==d.id(s)&&null!==d.id(s)&&0===t(a.results).filter(function(){return r(d.id(this),d.id(s))}).length&&a.results.unshift(s)),0===a.results.length&&v(c.formatNoMatches,"formatNoMatches")?(o("<li class='select2-no-results'>"+c.formatNoMatches(l.val())+"</li>"),void 0):(u.empty(),d.opts.populateResults.call(this,u,a.results,{term:l.val(),page:this.resultsPage,context:null}),a.more===!0&&v(c.formatLoadMore,"formatLoadMore")&&(u.append("<li class='select2-more-results'>"+e(c.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){d.loadMoreIfNeeded()},10)),this.postprocessResults(a,n),i(),void 0)})})}},cancel:function(){this.close()},blur:function(){this.close(),this.container.removeClass("select2-container-active"),this.dropdown.removeClass("select2-drop-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){window.setTimeout(this.bind(function(){this.search.focus(),this.search.val(this.search.val())}),10)},selectHighlighted:function(){var t=this.highlight(),e=this.results.find(".select2-highlighted").not(".select2-disabled"),n=e.closest(".select2-result-selectable").data("select2-data");n&&(e.addClass("select2-disabled"),this.highlight(t),this.onSelect(n))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function e(){var e,n,r,i,o;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth()?"auto":this.opts.element.outerWidth()+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(e=this.opts.element.attr("style"),void 0!==e)for(n=e.split(";"),i=0,o=n.length;o>i;i+=1)if(r=n[i].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/),null!==r&&r.length>=1)return r[1];return"resolve"===this.opts.width?(e=this.opts.element.css("width"),e.indexOf("%")>0?e:0===this.opts.element.outerWidth()?"auto":this.opts.element.outerWidth()+"px"):null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}var n=e.call(this);null!==n&&this.container.attr("style","width: "+n)}}),A=x(k,{createContainer:function(){var e=t("<div></div>",{"class":"select2-container"}).html(["    <a href='javascript:void(0)' class='select2-choice'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","    <div class='select2-drop select2-offscreen'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},opening:function(){this.search.show(),this.parent.opening.apply(this,arguments),this.dropdown.removeClass("select2-offscreen")},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.dropdown.removeAttr("style").addClass("select2-offscreen").insertAfter(this.selection).show())},focus:function(){this.close(),this.selection.focus()},isFocused:function(){return this.selection[0]===document.activeElement},cancel:function(){this.parent.cancel.apply(this,arguments),this.selection.focus()},initContainer:function(){var t,e=this.container,n=this.dropdown,r=!1;this.selection=t=e.find(".select2-choice"),this.search.bind("keydown",this.bind(function(t){if(this.enabled){if(t.which===C.PAGE_UP||t.which===C.PAGE_DOWN)return d(t),void 0;if(this.opened())switch(t.which){case C.UP:case C.DOWN:return this.moveHighlight(t.which===C.UP?-1:1),d(t),void 0;case C.TAB:case C.ENTER:return this.selectHighlighted(),d(t),void 0;case C.ESC:return this.cancel(t),d(t),void 0}else{if(t.which===C.TAB||C.isControl(t)||C.isFunctionKey(t)||t.which===C.ESC)return;if(this.opts.openOnEnter===!1&&t.which===C.ENTER)return;if(this.open(),t.which===C.ENTER)return}}})),this.search.bind("focus",this.bind(function(){this.selection.attr("tabIndex","-1")})),this.search.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active"),window.setTimeout(this.bind(function(){this.selection.attr("tabIndex",this.opts.element.attr("tabIndex"))}),10)})),t.bind("mousedown",this.bind(function(){r=!0,this.opened()?(this.close(),this.selection.focus()):this.enabled&&this.open(),r=!1})),n.bind("mousedown",this.bind(function(){this.search.focus()})),t.bind("focus",this.bind(function(){this.container.addClass("select2-container-active"),this.search.attr("tabIndex","-1")})),t.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active"),window.setTimeout(this.bind(function(){this.search.attr("tabIndex",this.opts.element.attr("tabIndex"))}),10)})),t.bind("keydown",this.bind(function(t){if(this.enabled){if(t.which===C.PAGE_UP||t.which===C.PAGE_DOWN)return d(t),void 0;if(!(t.which===C.TAB||C.isControl(t)||C.isFunctionKey(t)||t.which===C.ESC||this.opts.openOnEnter===!1&&t.which===C.ENTER)){if(t.which==C.DELETE)return this.opts.allowClear&&this.clear(),void 0;if(this.open(),t.which===C.ENTER)return d(t),void 0;if(48>t.which)return d(t),void 0;var e=String.fromCharCode(t.which).toLowerCase();t.shiftKey&&(e=e.toUpperCase()),this.search.focus(),this.search.val(e),d(t)}}})),t.delegate("abbr","mousedown",this.bind(function(t){this.enabled&&(this.clear(),d(t),this.close(),this.triggerChange(),this.selection.focus())})),this.setPlaceholder(),this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")}))},clear:function(){this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder()},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text())this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,function(e){void 0!==e&&null!==e&&(t.updateSelection(e),t.close(),t.setPlaceholder())})}},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments);return"select"===e.element.get(0).tagName.toLowerCase()&&(e.initSelection=function(e,n){var r=e.find(":selected");t.isFunction(n)&&n({id:r.attr("value"),text:r.text()})}),e},setPlaceholder:function(){var t=this.getPlaceholder();if(""===this.opts.element.val()&&void 0!==t){if(this.select&&""!==this.select.find("option:first").text())return;this.selection.find("span").html(e(t)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide()}},postprocessResults:function(e,n){var i=0,o=this,a=!0;this.results.find(".select2-result-selectable").each2(function(t,e){return r(o.id(e.data("select2-data")),o.opts.element.val())?(i=t,!1):void 0}),this.highlight(i),n===!0&&(a=this.showSearchInput=b(e.results)>=this.opts.minimumResultsForSearch,this.dropdown.find(".select2-search")[a?"removeClass":"addClass"]("select2-search-hidden"),t(this.dropdown,this.container)[a?"addClass":"removeClass"]("select2-with-searchbox"))},onSelect:function(t){var e=this.opts.element.val();this.opts.element.val(this.id(t)),this.updateSelection(t),this.close(),this.selection.focus(),r(e,this.id(t))||this.triggerChange()},updateSelection:function(t){var n,r=this.selection.find("span");this.selection.data("select2-data",t),r.empty(),n=this.opts.formatSelection(t,r),void 0!==n&&r.append(e(n)),this.selection.removeClass("select2-default"),this.opts.allowClear&&void 0!==this.getPlaceholder()&&this.selection.find("abbr").show()},val:function(){var t,e=null,n=this;if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],this.select)this.select.val(t).find(":selected").each2(function(t,n){return e={id:n.attr("value"),text:n.text()},!1}),this.updateSelection(e),this.setPlaceholder();else{if(void 0===this.opts.initSelection)throw Error("cannot call val() if initSelection() is not defined");if(!t)return this.clear(),void 0;this.opts.initSelection(this.opts.element,function(t){n.opts.element.val(t?n.id(t):""),n.updateSelection(t),n.setPlaceholder()})}},clearSearch:function(){this.search.val("")},data:function(t){var e;return 0===arguments.length?(e=this.selection.data("select2-data"),void 0==e&&(e=null),e):(t&&""!==t?(this.opts.element.val(t?this.id(t):""),this.updateSelection(t)):this.clear(),void 0)}}),E=x(k,{createContainer:function(){var e=t("<div></div>",{"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments);return"select"===e.element.get(0).tagName.toLowerCase()&&(e.initSelection=function(e,n){var r=[];e.find(":selected").each2(function(t,e){r.push({id:e.attr("value"),text:e.text()})}),t.isFunction(n)&&n(r)}),e},initContainer:function(){var t,e=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(e),this.search.bind("keydown",this.bind(function(e){if(this.enabled){if(e.which===C.BACKSPACE&&""===this.search.val()){this.close();var n,r=t.find(".select2-search-choice-focus");if(r.length>0)return this.unselect(r.first()),this.search.width(10),d(e),void 0;n=t.find(".select2-search-choice"),n.length>0&&n.last().addClass("select2-search-choice-focus")}else t.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(e.which){case C.UP:case C.DOWN:return this.moveHighlight(e.which===C.UP?-1:1),d(e),void 0;case C.ENTER:case C.TAB:return this.selectHighlighted(),d(e),void 0;case C.ESC:return this.cancel(e),d(e),void 0}e.which===C.TAB||C.isControl(e)||C.isFunctionKey(e)||e.which===C.BACKSPACE||e.which===C.ESC||(this.opts.openOnEnter!==!1||e.which!==C.ENTER)&&(this.open(),(e.which===C.PAGE_UP||e.which===C.PAGE_DOWN)&&d(e))}})),this.search.bind("keyup",this.bind(this.resizeSearch)),this.search.bind("blur",this.bind(function(){this.container.removeClass("select2-container-active")})),this.container.delegate(e,"mousedown",this.bind(function(t){this.enabled&&(this.clearPlaceholder(),this.open(),this.focusSearch(),t.preventDefault())})),this.container.delegate(e,"focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,function(e){void 0!==e&&null!==e&&(t.updateSelection(e),t.close(),t.clearSearch())})}},clearSearch:function(){var t=this.getPlaceholder();void 0!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(t).addClass("select2-default"),this.resizeSearch()):this.search.val(" ").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")?this.search.val("").removeClass("select2-default"):" "===this.search.val()&&this.search.val("")},opening:function(){this.parent.opening.apply(this,arguments),this.clearPlaceholder(),this.resizeSearch(),this.focusSearch()},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var r=[],i=[],o=this;t(e).each(function(){0>n(o.id(this),r)&&(r.push(o.id(this)),i.push(this))}),e=i,this.selection.find(".select2-search-choice").remove(),t(e).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var t=this.search.val();t=this.opts.tokenizer(t,this.data(),this.bind(this.onSelect),this.opts),null!=t&&void 0!=t&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t){this.addSelectedChoice(t),this.select&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.positionDropdown()):this.close(),this.triggerChange({added:t}),this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var r,i=t("<li class='select2-search-choice'>    <div></div>    <a href='javascript:void(0)' class='select2-search-choice-close' tabindex='-1'></a></li>"),o=this.id(n),a=this.getVal();r=this.opts.formatSelection(n,i),i.find("div").replaceWith("<div>"+e(r)+"</div>"),i.find(".select2-search-choice-close").bind("mousedown",d).bind("click dblclick",this.bind(function(e){this.enabled&&(t(e.target).closest(".select2-search-choice").fadeOut("fast").animate({width:"hide"},50,this.bind(function(){this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),d(e))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),i.data("select2-data",n),i.insertBefore(this.searchContainer),a.push(o),this.setVal(a)},unselect:function(t){var e,r,i=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";e=t.data("select2-data"),r=n(this.id(e),i),r>=0&&(i.splice(r,1),this.setVal(i),this.select&&this.postprocessResults()),t.remove(),this.triggerChange({removed:e})},postprocessResults:function(){var t=this.getVal(),e=this.results.find(".select2-result-selectable"),r=this.results.find(".select2-result-with-children"),i=this;e.each2(function(e,r){var o=i.id(r.data("select2-data"));n(o,t)>=0?r.addClass("select2-disabled").removeClass("select2-result-selectable"):r.removeClass("select2-disabled").addClass("select2-result-selectable")}),r.each2(function(t,e){0==e.find(".select2-result-selectable").length?e.addClass("select2-disabled"):e.removeClass("select2-disabled")}),e.each2(function(t,e){return!e.hasClass("select2-disabled")&&e.hasClass("select2-result-selectable")?(i.highlight(0),!1):void 0})},resizeSearch:function(){var t,e,n,r,i,a=o(this.search);t=h(this.search)+10,e=this.search.offset().left,n=this.selection.width(),r=this.selection.offset().left,i=n-(e-r)-a,t>i&&(i=n-a),40>i&&(i=n-a),this.search.width(i)},getVal:function(){var t;return this.select?(t=this.select.val(),null===t?[]:t):(t=this.opts.element.val(),i(t,this.opts.separator))},setVal:function(e){var r;this.select?this.select.val(e):(r=[],t(e).each(function(){0>n(this,r)&&r.push(this)}),this.opts.element.val(0===r.length?"":r.join(this.opts.separator)))},val:function(){var e,n=[],r=this;if(0===arguments.length)return this.getVal();if(e=arguments[0],!e)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void 0;if(this.setVal(e),this.select)this.select.find(":selected").each(function(){n.push({id:t(this).attr("value"),text:t(this).text()})}),this.updateSelection(n);else{if(void 0===this.opts.initSelection)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var n=t(e).map(r.id);r.setVal(n),r.updateSelection(e),r.clearSearch()})}this.clearSearch()},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");
this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(n.opts.id(t(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e){var n,r=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return t(this).data("select2-data")}).get():(e||(e=[]),n=t.map(e,function(t){return r.opts.id(t)}),this.setVal(n),this.updateSelection(e),this.clearSearch(),void 0)}}),t.fn.select2=function(){var e,r,i,o,a=Array.prototype.slice.call(arguments,0),s=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];return this.each(function(){if(0===a.length||"object"==typeof a[0])e=0===a.length?{}:t.extend({},a[0]),e.element=t(this),"select"===e.element.get(0).tagName.toLowerCase()?o=e.element.attr("multiple"):(o=e.multiple||!1,"tags"in e&&(e.multiple=o=!0)),r=o?new E:new A,r.init(e);else{if("string"!=typeof a[0])throw"Invalid arguments to select2 plugin: "+a;if(0>n(a[0],s))throw"Unknown method: "+a[0];if(i=void 0,r=t(this).data("select2"),void 0===r)return;if(i="container"===a[0]?r.container:r[a[0]].apply(r,a.slice(1)),void 0!==i)return!1}}),void 0===i?this:i},t.fn.select2.defaults={width:"copy",closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,n){var r=[];return f(t.text,n.term,r),r.join("")},formatSelection:function(t){return t.text},formatResultCssClass:function(){return void 0},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(t,e){return"Please enter "+(e-t.length)+" more characters"},formatSelectionTooBig:function(t){return"You can only select "+t+" items"},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumSelectionSize:0,id:function(t){return t.id},matcher:function(t,e){return e.toUpperCase().indexOf(t.toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:w}}};if("function"==typeof define&&define.amd)define(["jquery"],function(e){return t(e)});else if("undefined"!=typeof window&&"undefined"==typeof ender)return t(window.jQuery)})();